(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{14904:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolio",function(){return s(19993)}])},1948:function(e,t,s){"use strict";var r=s(80853),i=s(67294),n=s(14949),o=s(52336);let a=()=>{let[e,t]=(0,r.Z)(o.O2,{defaultValue:n.Vm.DEPOSIT,path:"/"}),s=(0,i.useMemo)(()=>e,[e]);return{walletTab:s,setWalletTab:t}};t.Z=a},14949:function(e,t,s){"use strict";var r,i,n,o,a,l,c,d,h,x,u,m,p,g,f,j;s.d(t,{$U:function(){return i},Vm:function(){return a},jb:function(){return n},mX:function(){return o}}),s(67294),(h=r||(r={})).MarketGroup="market-group",h.Market="market",(x=i||(i={})).TRANSAK_ORDER_SUCCESSFUL="TRANSAK_ORDER_SUCCESSFUL",x.TRANSAK_WIDGET_CLOSE="TRANSAK_WIDGET_CLOSE",(u=n||(n={})).LOCAL_DEVELOPMENT="LOCAL_DEVELOPMENT",u.DEVELOPMENT="DEVELOPMENT",u.STAGING="STAGING",u.PRODUCTION="PRODUCTION",(m=o||(o={})).USD="USD",m.INR="INR",m.GBP="GBP",m.EUR="EUR",(p=a||(a={})).DEPOSIT="deposit",p.WITHDRAW="withdraw",(g=l||(l={}))[g.Start=0]="Start",g[g.Confirm=1]="Confirm",g[g.Loading=2]="Loading",g[g.Success=3]="Success",g[g.Failure=4]="Failure",g[g.MagicIssue=5]="MagicIssue",g[g.InsufficientFunds=6]="InsufficientFunds",g[g.NetworkFeeIncreased=7]="NetworkFeeIncreased",(f=c||(c={}))[f.Confirm=0]="Confirm",f[f.AddressInput=1]="AddressInput",f[f.BuildingProof=2]="BuildingProof",f[f.SubmittingProof=3]="SubmittingProof",f[f.Success=4]="Success",f[f.Failure=5]="Failure",(j=d||(d={}))[j.Confirm=0]="Confirm",j[j.Loading=1]="Loading",j[j.Success=2]="Success",j[j.Failure=3]="Failure"},19993:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return sv},default:function(){return sy}});var r,i,n,o,a,l,c,d,h,x,u,m,p,g,f,j,v=s(85893),y=s(11163),k=s(67294),b=s(90799),w=s(25302),C=s(61744),$=s(92077),z=s.n($),D=s(95338),S=s(79624),M=s(50837);let R=(0,M.zo)(S.f,{display:"flex","-webkit-tap-highlight-color":"transparent","&[data-orientation=horizontal]":{height:1,width:"100%"},"&[data-orientation=vertical]":{width:1,alignItems:"stretch"}});var T=s(20480),I=s(11306),F=s(1948),O=s(14949),Z=s(77946),A=s(45645),B=s(78904),P=s(3270),E=s(22844),V=s(49819);let L=e=>{let{heading:t,subHeading:s,isLoading:r}=e;return(0,v.jsxs)(w.kC,{css:{flexDirection:"column",gap:"$2","@notDesktop":{flex:1}},children:[(0,v.jsx)(V.xv,{size:"md",css:{color:"white !important",textDecoration:"none","@notDesktop":{fontSize:"12px !important"}},children:t}),(0,v.jsx)(w.kC,{css:{transition:"all 0.2s",...r&&{animation:"".concat(E.dC," 2s infinite")}},children:(0,v.jsx)(V.xv,{weight:"medium",css:{color:"white !important",fontSize:"32px !important",textDecoration:"none","@notDesktop":{fontSize:"20px !important"}},children:s})})]})},q=(0,M.zo)(R,{backgroundColor:"white",opacity:.2}),N=(0,M.zo)(D.z,{height:"40px",cursor:"pointer",fontFamily:"$sauce700 !important",fontSize:"$md !important","@notDesktop":{flex:1},variants:{variant:{black:{backgroundColor:"black !important",color:"white !important","&:hover":{opacity:"0.7 !important"},"&:active":{opacity:"0.6 !important"}},white:{backgroundColor:"white !important",color:"black !important","&:hover":{backgroundColor:"$gray6 !important"},"&:active":{backgroundColor:"$gray5 !important"}}}}}),W=()=>{let e=(0,y.useRouter)(),{setShowDeploySafeModal:t}=(0,B.vR)(),{authenticationType:s,isSafeDeployed:r}=(0,Z.ec)(),{setWalletTab:i}=(0,F.Z)(),{proxyUsdcBalance:n,isProxyUsdcBalanceLoading:o,isProxyUsdcBalanceFetching:a}=(0,I.Z)(),{arePositionsLoading:l,marketPositionsValue:c,liquidityPositionsValue:d}=(0,T.Z)(),{setShowDepositModal:h}=(0,A.EY)(),x=(0,k.useMemo)(()=>c.add(d),[c,d]),u=(0,k.useMemo)(()=>n.add(x),[n,x]),m=(0,k.useCallback)(()=>{i(O.Vm.WITHDRAW),e.push(P.Y.Wallet)},[e,i]);return(0,v.jsxs)(w.kC,{css:{borderRadius:"$lg",background:"linear-gradient(270.96deg, #9B51E0 13.42%, #1652F0 99.27%)",gap:"$4","@laptops":{flexDirection:"row",justifyContent:"space-between",px:"$10",py:"$8",mt:"$4"},"@notDesktop":{flexDirection:"column",mt:"28px",p:"$4"}},children:[(0,v.jsxs)(w.kC,{css:{"@laptops":{gap:"$12"},"@notDesktop":{gap:"$4"}},children:[(0,v.jsx)(L,{heading:"Portfolio Value",subHeading:"".concat(z()((0,C.formatUnits)(u,6)).format("$0,0.00")),isLoading:l||o}),(0,v.jsx)(q,{decorative:!0,orientation:"vertical"}),(0,v.jsx)(L,{heading:"USDC Balance",subHeading:"".concat(z()((0,C.formatUnits)(n,6)).format("$0,0.00")),isLoading:o,isFetching:a})]}),(0,v.jsxs)(w.kC,{css:{gap:"$4","@laptops":{flexDirection:"row",alignItems:"center"},"@notDesktop":{width:"100%"}},children:[(0,v.jsx)(N,{variant:"black",onClick(){"eoa"!==s||r?h(!0):t(!0)},children:"Deposit"}),(0,v.jsx)(N,{variant:"white",onClick:()=>m(),children:"Withdraw"})]})]})};var Q=s(78234),_=s(96486),H=s(36888);let Y=(0,M.zo)(H.fC,{"&:focus":{outline:"none !important",border:"none !important"},"&:active":{outline:"none !important",border:"none !important"},variants:{fullWidth:{true:{width:"100%"},false:{}},variant:{default:{},underline:{display:"flex",flexDirection:"column",'&[data-orientation="vertical"]':{},'&[data-orientation="horizontal"]':{}}}},defaultVariants:{variant:"default",fullWidth:!0}}),G=(0,M.zo)(H.aV,{variants:{fullWidth:{true:{width:"100%",maxWidth:"100vw"},false:{}},overflow:{true:{overflowX:"auto",scrollbarHeight:"none","&::-webkit-scrollbar":{height:"0",background:"transparent"}},false:{}},variant:{default:{},underline:{display:"flex",gap:"1.5rem",borderBottom:"1px solid $gray6",height:"51px",backgroundColor:"white",'&[data-orientation="vertical"]':{},'&[data-orientation="horizontal"]':{}}}},defaultVariants:{variant:"default",fullWidth:!0}}),U=(0,M.zo)(H.xz,{variants:{variant:{default:{},underline:{unset:"all",pb:"$3",color:"$black",fontFamily:"$sauce600",fontSize:"14px",backgroundColor:"transparent",border:"none",borderBottom:"2px solid transparent",cursor:"pointer",transition:"all 0.2s","&:focus, &:active":{border:"none",borderBottom:"2px solid transparent",outline:"none"},'&[data-state="active"]':{borderBottom:"2px solid $black",color:"black"},'&[data-state="inactive"]':{color:"$gray3","&:hover":{color:"$gray1"}},'&[data-orientation="vertical"]':{},'&[data-orientation="horizontal"]':{}}}},defaultVariants:{variant:"default"}}),X=(0,M.zo)(H.VY,{backgroundColor:"white","&:focus":{outline:"none !important",border:"none !important"},"&:active":{outline:"none !important",border:"none !important"},variants:{variant:{default:{},underline:{'&[data-state="active"]':{},'&[data-state="inactive"]':{},'&[data-orientation="vertical"]':{},'&[data-orientation="horizontal"]':{}}}},defaultVariants:{variant:"default"}});var J=s(53033),K=s(89969),ee=s(80853),et=s(69119),es=s(46038),er=s(83894),ei=s(52336);(r=h||(h={})).Value="Value (Current)",r.Investment="Value (Initial)",r.Market="Market",r.Quantity="Quantity",r.DollarGain="P/L ($)",r.PercentageGain="P/L (%)",r.Resolution="Resolving Soonest",(i=x||(x={})).Market="Market",i.FilledQty="Filled Quantity",i.TotalQty="Total Quantity",i.OrderDate="Order Date",i.Resolution="Resolving Soonest",(n=u||(u={})).Value="Value",n.Market="Market",n.PoolShare="Pool share",n.Fees="Fees",n.Resolution="Resolving Soonest",(o=m||(m={})).Newest="Newest",o.Oldest="Oldest",o.ValueDesc="Value",o.ShareQtyDesc="Shares",(a=p||(p={})).Buy="Buy",a.Sell="Sell",a.Redeem="Redeem",a.Merge="Merge",a.AllTrades="All Trades",a.AddLiquidity="Liquidity Added",a.RemoveLiquidity="Liquidity Removed",a.AllLiquidity="All Liquidity",a.All="All";let en=()=>{let[e,t]=(0,ee.Z)(ei.$O,{defaultValue:h.Market,path:"/"}),[s,r]=(0,ee.Z)(ei.LQ,{defaultValue:x.Market,path:"/"}),[i,n]=(0,ee.Z)(ei.r7,{defaultValue:u.Market,path:"/"}),[o,a]=(0,ee.Z)(ei.Mu,{defaultValue:m.Newest,path:"/"}),l=(0,k.useMemo)(()=>e,[e]),c=(0,k.useMemo)(()=>s,[s]),d=(0,k.useMemo)(()=>i,[i]),p=(0,k.useMemo)(()=>o,[o]);return{sortPortfolioMarketsBy:l,setSortPortfolioMarketsBy:t,sortPortfolioOpenOrdersBy:c,setSortPortfolioOpenOrdersBy:r,sortPortfolioLiquidityBy:d,setSortPortfolioLiquidityBy:n,sortPortfolioHistoryBy:p,setSortPortfolioHistoryBy:a}},eo=(0,et.Z)((0,es.Z)(new Date,{months:1})).valueOf().toString(),ea=(0,er.Z)(new Date).valueOf().toString(),el=()=>{let[e,t]=(0,ee.Z)(ei.VC,{defaultValue:eo,path:"/"}),[s,r]=(0,ee.Z)(ei.RN,{defaultValue:ea,path:"/"}),[i,n]=(0,ee.Z)(ei.f9,{defaultValue:p.All,path:"/"}),o=(0,k.useCallback)(e=>{t(e.valueOf().toString())},[t]),a=(0,k.useCallback)(e=>{r(e.valueOf().toString())},[r]),l=(0,k.useMemo)(()=>new Date(parseInt(e,10)),[e]),c=(0,k.useMemo)(()=>new Date(parseInt(s,10)),[s]),d=(0,k.useMemo)(()=>i,[i]);return{portfolioHistoryStartDate:l,portfolioHistoryEndDate:c,portfolioHistoryActionFilter:d,setPortfolioHistoryStartDate:o,setPortfolioHistoryEndDate:a,setPortfolioHistoryActionFilter:n}};(l=g||(g={})).All="All",l.Active="Active",l.Ended="Ended";let ec=()=>{let[e,t]=(0,ee.Z)(ei._g,{defaultValue:g.All,path:"/"}),s=(0,k.useMemo)(()=>e,[e]);return{redeemableStatus:s,setRedeemableStatus:t}},ed=()=>{let[e,t]=(0,ee.Z)(ei.XG,{defaultValue:f.Positions,path:"/"}),s=(0,k.useMemo)(()=>e,[e]);return{setSelectedTab:t,selectedTab:s}};var eh=s(44369);(c=f||(f={})).Positions="positions",c.Orders="orders",c.Liquidity="liquidity",c.History="history";let ex=(0,k.createContext)({}),eu=e=>{let{children:t}=e,{selectedTab:s,setSelectedTab:r}=ed(),{sortPortfolioLiquidityBy:i,sortPortfolioMarketsBy:n,sortPortfolioOpenOrdersBy:o,sortPortfolioHistoryBy:a,setSortPortfolioLiquidityBy:l,setSortPortfolioMarketsBy:c,setSortPortfolioOpenOrdersBy:d,setSortPortfolioHistoryBy:h}=en(),{redeemableStatus:x,setRedeemableStatus:u}=ec(),{portfolioHistoryStartDate:m,portfolioHistoryEndDate:p,portfolioHistoryActionFilter:g,setPortfolioHistoryStartDate:f,setPortfolioHistoryEndDate:j,setPortfolioHistoryActionFilter:y}=el(),[b,w]=(0,k.useState)(!1),[C,$]=(0,k.useState)(),[z,D]=(0,k.useState)({open:!1,type:"success",message:""}),[S,M]=(0,k.useState)([]),R=(0,k.useCallback)(e=>{M((0,eh.Kb)(e))},[M]),T=(0,k.useMemo)(()=>({csvFormattedHistory:S,portfolioHistoryActionFilter:g,portfolioHistoryEndDate:p,portfolioHistoryStartDate:m,portfolioSearchQuery:C,redeemableStatus:x,selectedTab:s,setCsvFormattedHistory:R,setPortfolioHistoryActionFilter:y,setPortfolioHistoryEndDate:j,setPortfolioHistoryStartDate:f,setPortfolioSearchQuery:$,setRedeemableStatus:u,setSelectedTab:r,setShowRedeemAllModal:w,setSortPortfolioHistoryBy:h,setSortPortfolioLiquidityBy:l,setSortPortfolioMarketsBy:c,setSortPortfolioOpenOrdersBy:d,setToastState:D,showRedeemAllModal:b,sortPortfolioHistoryBy:a,sortPortfolioLiquidityBy:i,sortPortfolioMarketsBy:n,sortPortfolioOpenOrdersBy:o,toastState:z}),[S,g,p,m,C,x,s,R,y,j,f,$,u,r,w,h,l,c,d,D,b,a,i,n,o,z]);return(0,v.jsxs)(ex.Provider,{value:T,children:[t,(0,v.jsx)(J.Z,{open:z.open,autoHideDuration:3e3,onClose:()=>D({...z,open:!1,message:""}),anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{zIndex:1000001},children:(0,v.jsx)("div",{children:(0,v.jsx)(K.Z,{onClose:()=>D({...z,open:!1,message:""}),severity:z.type,elevation:6,variant:"filled",sx:{backgroundColor:"success"===z.type?"#27AE60":"#EB5757"},children:z.message})})})]})},em=()=>(0,k.useContext)(ex);var ep=s(9279),eg=s(88767),ef=s(2282),ej=s(80524),ev=s(41935);let ey=(e,t)=>parseFloat(t.timestamp)-parseFloat(e.timestamp),ek=(e,t)=>parseFloat(e.timestamp)-parseFloat(t.timestamp),eb=(e,t)=>parseFloat(e.valueBought)-parseFloat(t.valueBought),ew=(e,t)=>parseFloat(e.outcomeTokensAmount)-parseFloat(t.outcomeTokensAmount),eC=(e,t)=>{switch(t){case"newest":default:return e.sort(ek);case"oldest":return e.sort(ey);case"value":return e.sort(eb);case"shareQty":return e.sort(ew)}},e$=async(e,t,s,r,i,n)=>{let o=await (0,ej.getUserActivity)(e,t,s,r,i,n);return{transactions:eC([...o.transactions,...o.enrichedOrderFilleds]),fpmmFundingAdditions:o.fpmmFundingAdditions,fpmmFundingRemovals:o.fpmmFundingRemovals,merges:o.merges,redemptions:o.redemptions}},ez=e=>{switch(e){case m.Newest:return"newest";case m.Oldest:return"oldest";case m.ValueDesc:return"value";case m.ShareQtyDesc:return"shareQty";default:return"newest"}},eD=(e,t,s,r)=>{let{data:i,fetchNextPage:n,hasNextPage:o,isSuccess:a,isLoading:l,isError:c,isFetching:d,isFetchingNextPage:h}=(0,eg.useInfiniteQuery)(["api/history",e,1e3,t,s,ez(r)],i=>{let{pageParam:n=0}=i;return e$(e,1e3,1e3*n,t,s,ez(r))},{refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:6e4,keepPreviousData:!0,getNextPageParam(e,t){if(t.length&&(1e3===e.transactions.length||1e3===e.redemptions.length||1e3===e.merges.length||1e3===e.fpmmFundingAdditions.length||1e3===e.fpmmFundingRemovals.length))return t.length},onError(t){(0,ev.S3)(t,"usePortfolioActivity",e,ev.ll.GRAPHQL)}}),x=(0,k.useMemo)(()=>null==i?void 0:i.pages.reduce((e,t)=>(Object.entries(t).forEach(t=>{let[s,r]=t;e[s]=[...e[s],...r]}),e),{transactions:[],fpmmFundingAdditions:[],fpmmFundingRemovals:[],merges:[],redemptions:[]}),[i]),u=(0,k.useMemo)(()=>!!x&&!Object.values(x).flat().length,[x]);return{flattenedHistoryItems:x,fetchNextPage:n,hasNextPage:o,isSuccess:a,isLoading:l,isError:c,isFetching:d,isFetchingNextPage:h,isEmpty:u}},eS=(e,t,s,r)=>{switch(s){case h.Value:return parseFloat(t.currentMarketValue)-parseFloat(e.currentMarketValue);case h.Investment:return parseFloat(t.valueInit)-parseFloat(e.valueInit);case h.Market:return e.market.localeCompare(t.market);case h.Quantity:return parseFloat(t.qty)-parseFloat(e.qty);case h.DollarGain:return parseFloat(t.profit)-parseFloat(e.profit);case h.PercentageGain:return parseFloat(t.loss)-parseFloat(e.loss);case h.Resolution:var i,n;if(e.isClosed||t.isClosed)return Number(t.isClosed)-Number(e.isClosed);let o=null==r?void 0:r.find(t=>t.question===e.market),a=null==r?void 0:r.find(e=>e.question===t.market);return new Date(null!==(i=null==o?void 0:o.end_date)&&void 0!==i?i:0).getTime()-new Date(null!==(n=null==a?void 0:a.end_date)&&void 0!==n?n:0).getTime();default:return parseFloat(t.currentMarketValue)-parseFloat(e.currentMarketValue)}},eM=(e,t,s)=>{let r=e.reduce((e,t)=>({availableQty:e.availableQty+t.availableQty,totalQty:e.totalQty+t.totalQty}),{availableQty:0,totalQty:0}),i=t.reduce((e,t)=>({availableQty:e.availableQty+t.availableQty,totalQty:e.totalQty+t.totalQty}),{availableQty:0,totalQty:0});switch(s){case x.Market:return e[0].question.localeCompare(t[0].question);case x.FilledQty:return i.totalQty-i.availableQty-(r.totalQty-r.availableQty);case x.TotalQty:return i.totalQty-r.totalQty;case x.OrderDate:return t[0].endDate-e[0].endDate;case x.Resolution:return e[0].endDate-t[0].endDate;default:return e[0].question.localeCompare(t[0].question)}},eR=(e,t,s,r)=>{switch(s){case u.Value:return parseFloat(t.sharesValue)-parseFloat(e.sharesValue);case u.Market:return e.market.localeCompare(t.market);case u.PoolShare:return parseFloat(t.poolPercentage)-parseFloat(e.poolPercentage);case u.Fees:return parseFloat(t.fees)-parseFloat(e.fees);case u.Resolution:var i,n;if(e.isClosed||t.isClosed)return Number(t.isClosed)-Number(e.isClosed);let o=null==r?void 0:r.find(t=>t.question===e.market),a=null==r?void 0:r.find(e=>e.question===t.market);return new Date(null!==(i=null==o?void 0:o.end_date)&&void 0!==i?i:0).getTime()-new Date(null!==(n=null==a?void 0:a.end_date)&&void 0!==n?n:0).getTime();default:return parseFloat(t.sharesValue)-parseFloat(e.sharesValue)}},eT=(e,t,s)=>{switch(s){case m.Newest:return t.timestamp-e.timestamp;case m.Oldest:return e.timestamp-t.timestamp;case m.ValueDesc:let r=void 0===e.usdcAmount?-1:Number(e.usdcAmount),i=void 0===t.usdcAmount?-1:Number(t.usdcAmount);return i-r;case m.ShareQtyDesc:return Number(t.tokenAmount)-Number(e.tokenAmount);default:return 0}},eI=e=>{let{flex:t,justify:s="left",css:r,children:i}=e;return(0,v.jsx)(w.kC,{css:{flex:t||1,alignItems:"center",..."left"===s&&{justifyContent:"flex-start"},..."right"===s&&{justifyContent:"flex-end"},...r&&{...r}},children:i})};var eF=s(51132);let eO=(0,M.zo)(w.kC,{width:"100%",height:"60px",alignItems:"center",backgroundColor:"$shadeWhite",transition:"all 0.2s",gap:"$6","@notDesktop":{height:"100px"},'&[data-state="closed"]':{"&:hover":{backgroundColor:"$shadeMediumTransparent"}},'&[data-state="open"]':{"&:hover":{backgroundColor:"$shadeMediumTransparent"}}}),eZ=(0,M.zo)(w.kC,{fontSize:"14px",fontFamily:"$sauce500",py:"4px",px:"6px",borderRadius:"4px",variants:{variant:{green:{backgroundColor:"$green2_10",color:"$green2"},red:{backgroundColor:"$red_10",color:"$red"}}}}),eA=(0,M.zo)(D.z,{backgroundColor:"$transparent",color:"$gray3",border:"1px solid $transparent",fontSize:"$sm !important",fontFamily:"$sauce400 !important",transition:"0.2s all",cursor:"pointer",gap:"$1",pl:0,pr:"$1",py:0,height:"20px",width:"58px",justifyContent:"space-between",alignItems:"center","&:hover":{opacity:.8},"&:active":{opacity:.7}}),eB=(0,M.zo)(w.kC,{flexDirection:"column",gap:"$1",justifyContent:"center"}),eP=(0,M.zo)(eF.fC,{borderBottom:"1px solid $gray6"}),eE=(0,M.zo)(eF.ck,{}),eV=(0,M.zo)(eF.xz,{}),eL=(0,M.zo)(eF.VY,{overflow:"hidden",'&[data-state="open"]':{animation:"".concat(E.qw," 300ms ease-out")},'&[data-state="closed"]':{animation:"".concat(E.iM," 300ms ease-out")}}),eq=(0,M.zo)(w.Dr,{width:"75%",height:"23px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}),eN=()=>(0,v.jsx)(eO,{css:{borderBottom:"1px solid $gray6",py:"$2",animation:"".concat(E.dC," 2s infinite"),"@laptops":{display:"none"}},children:(0,v.jsxs)(w.kC,{css:{flex:1,flexDirection:"column",gap:"$2"},children:[(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3",height:"40px",alignItems:"center"},children:[(0,v.jsx)(w.kC,{css:{width:"40px",maxWidth:"40px",height:"40px",maxHeight:"40px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(eq,{css:{flex:1}})})]}),(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$8",justifyContent:"space-between"},children:[(0,v.jsxs)(w.kC,{css:{flexDirection:"column",gap:"$1"},children:[(0,v.jsx)(eq,{css:{width:"30px",height:"14px"}}),(0,v.jsx)(eq,{css:{width:"30px",height:"14px"}})]}),(0,v.jsxs)(w.kC,{css:{flexDirection:"column",justifyContent:"flex-end",gap:"$1"},children:[(0,v.jsx)(eq,{css:{height:"14px",width:"30px"}}),(0,v.jsx)(eq,{css:{height:"14px",width:"30px"}})]})]})]})}),eW=(0,M.zo)(eO,{animation:"".concat(E.dC," 2s infinite")}),eQ=(0,M.zo)(w.Dr,{width:"75%",height:"42px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}),e_=(0,M.zo)(w.Dr,{width:"75%",height:"23px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}),eH=e=>{let{tab:t}=e;switch(t){case f.Positions:return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eW,{css:{"@notDesktop":{display:"none"}},children:[(0,v.jsxs)(eI,{flex:4,css:{gap:"$2"},children:[(0,v.jsx)(w.kC,{css:{width:"32px",maxWidth:"32px",height:"32px",maxHeight:"32px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(e_,{css:{flex:1}})})]}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eQ,{})})]}),(0,v.jsx)(eN,{})]});case f.Orders:return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eW,{css:{"@notDesktop":{display:"none"}},children:[(0,v.jsxs)(eI,{flex:5,css:{gap:"$2"},children:[(0,v.jsx)(w.kC,{css:{width:"32px",maxWidth:"32px",height:"32px",maxHeight:"32px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(w.Dr,{css:{flex:1,height:"23px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}})})]}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eQ,{css:{width:"32px",height:"32px"}})})]}),(0,v.jsx)(eN,{})]});case f.Liquidity:return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eW,{css:{"@notDesktop":{display:"none"}},children:[(0,v.jsxs)(eI,{flex:5,css:{gap:"$2"},children:[(0,v.jsx)(w.kC,{css:{width:"32px",maxWidth:"32px",height:"32px",maxHeight:"32px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(w.Dr,{css:{flex:1,height:"23px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}})})]}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eQ,{})})]}),(0,v.jsx)(eN,{})]});case f.History:return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eW,{css:{"@notDesktop":{display:"none"}},children:[(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsxs)(eI,{flex:5,css:{gap:"$2"},children:[(0,v.jsx)(w.kC,{css:{width:"32px",maxWidth:"32px",height:"32px",maxHeight:"32px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(w.Dr,{css:{flex:1,height:"23px",backgroundColor:"$shadeMediumTransparent",borderRadius:"6px"}})})]}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(e_,{})})]}),(0,v.jsx)(eN,{})]});default:return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eW,{css:{"@notDesktop":{display:"none"}},children:[(0,v.jsxs)(eI,{flex:4,css:{gap:"$2"},children:[(0,v.jsx)(w.kC,{css:{width:"32px",maxWidth:"32px",height:"32px",maxHeight:"32px",backgroundColor:"$shadeMediumTransparent",borderRadius:"7px"}}),(0,v.jsx)(w.kC,{css:{flex:1,width:"100%"},children:(0,v.jsx)(e_,{css:{flex:1}})})]}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(e_,{})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eQ,{})})]}),(0,v.jsx)(eN,{})]})}};var eY=s(62030),eG=s(41664),eU=s.n(eG),eX=s(70689);let eJ=(0,M.zo)(eX.r,{position:"relative",variants:{color:{dark:{color:"$shadeDarker !important"},medium:{color:"$shadeMedium !important"},light:{color:"$shadeWhite !important"}}},defaultVariants:{color:"dark"}});var eK=s(84557),e0=s(59404);let e1=e=>{let{heading:t,subheading:s,align:r}=e;return(0,v.jsxs)(w.kC,{css:{flexDirection:"column",alignItems:"left"===r?"start":"end",gap:"$1"},children:[(0,v.jsx)(V.xv,{size:"md",weight:"normal",children:t}),(0,v.jsx)(V.xv,{size:"sm",weight:"medium",css:{color:"$gray3 !important"},children:s})]})},e2=(e,t)=>{switch(e){case"Bought":return"Buy ".concat((0,_.capitalize)(t));case"Sold":return"Sell ".concat((0,_.capitalize)(t));default:return e}},e3=e=>{let{activityFeedItem:t}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.kC,{css:{flexDirection:"column",width:"100%",borderBottom:"1px solid $gray6","@notDesktop":{display:"none"}},children:(0,v.jsxs)(eO,{children:[(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:t.action})}),(0,v.jsxs)(eI,{flex:5,css:{gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:t.marketImage,size:32,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:t.eventSlug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eventSlug?"/event/".concat(t.eventSlug,"/").concat(t.marketSlug):"/market/".concat(t.marketSlug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:t.marketName})})]}),(0,v.jsx)(eI,{children:"Redemption"===t.action||"Liquidity Added"===t.action||"Liquidity Removed"===t.action||"Merge"===t.action?(0,v.jsx)(V.xv,{children:"–"}):(0,v.jsx)(eZ,{variant:0===t.tokenIndex?"green":"red",children:t.tokenName})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.tokenAmount).format("0,0.000000"),children:z()(t.tokenAmount).format("0,0")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.usdcAmount).format("$0,0.000000"),children:"Liquidity Removed"==t.action?"–":z()(t.usdcAmount).format("$0,0.00")})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsxs)(V.ee,{href:"https://".concat(80001===e0.B8.chainId?"mumbai.":"","polygonscan.com/tx/").concat(t.hash),target:"_blank",rel:"noopener noreferrer",css:{display:"flex",alignItems:"center",fontSize:"14px",color:"$gray3",transition:"all 0.2s",cursor:"pointer",gap:"$1","&:hover":{textDecorationColor:"$gray2",color:"$gray2",svg:{color:"$gray2 !important"}}},children:[(0,eY.Z)(new Date(1e3*t.timestamp),{addSuffix:!0}).split("about").pop(),(0,v.jsx)(eJ,{css:{size:"20px",color:"$gray3 !important",transition:"all 0.2s",cursor:"pointer"}})]})})]})}),(0,v.jsxs)(w.kC,{css:{flexDirection:"column",width:"100%",borderBottom:"1px solid $gray6",py:"$4",gap:"$3","@laptops":{display:"none"}},children:[(0,v.jsx)(eO,{css:{height:"auto"},children:(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3",alignItems:"center"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:t.marketImage,size:40,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:t.eventSlug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eventSlug?"/event/".concat(t.eventSlug,"/").concat(t.marketSlug):"/market/".concat(t.marketSlug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",weight:"semi",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:t.marketName})})]})}),(0,v.jsx)(eO,{css:{height:"auto"},children:(0,v.jsxs)(w.kC,{css:{flex:1,justifyContent:"space-between"},children:[(0,v.jsx)(e1,{heading:e2(t.action,t.tokenName),subheading:"".concat(z()(t.tokenAmount).format("0,0")," shares"),align:"left"}),(0,v.jsxs)(w.kC,{css:{flexDirection:"column",alignItems:"end",gap:"$1"},children:[(0,v.jsx)(V.xv,{size:"md",weight:"normal",children:"Liquidity Removed"==t.action?"–":z()(t.usdcAmount).format("$0,0.00")}),(0,v.jsxs)(V.ee,{href:"https://".concat(80001===e0.B8.chainId?"mumbai.":"","polygonscan.com/tx/").concat(t.hash),target:"_blank",rel:"noopener noreferrer",css:{display:"flex",alignItems:"center",fontFamily:"$sauce500 !important",fontSize:"12px",color:"$gray3",transition:"all 0.2s",cursor:"pointer",gap:"$1",height:"12px","&:hover":{textDecorationColor:"$gray2",color:"$gray2",svg:{color:"$gray2 !important"}}},children:[(0,eY.Z)(new Date(1e3*t.timestamp),{addSuffix:!0}).split("about").pop(),(0,v.jsx)(eJ,{css:{size:"16px",color:"$gray3 !important",transition:"all 0.2s",cursor:"pointer"}})]})]})]})})]})]})},e4=()=>{var e,t,s,r,i;let{proxyAddress:n}=(0,Z.ec)(),{sortPortfolioHistoryBy:o,portfolioSearchQuery:a,portfolioHistoryStartDate:l,portfolioHistoryEndDate:c,portfolioHistoryActionFilter:d,setCsvFormattedHistory:h}=em(),{flattenedHistoryItems:x,isError:u,isLoading:m,isFetchingNextPage:g,isEmpty:j}=eD(null!=n?n:ep.d,l?Math.round(l.valueOf()/1e3):void 0,c?Math.round(c.valueOf()/1e3):void 0,o),y=(0,k.useMemo)(()=>[...new Set([...null!==(e=null==x?void 0:x.transactions.map(e=>e.market.id.toLowerCase()))&&void 0!==e?e:[],...null!==(t=null==x?void 0:x.fpmmFundingAdditions.map(e=>e.fpmm.id.toLowerCase()))&&void 0!==t?t:[],...null!==(s=null==x?void 0:x.fpmmFundingRemovals.map(e=>e.fpmm.id.toLowerCase()))&&void 0!==s?s:[],...null!==(r=null==x?void 0:x.merges.map(e=>e.condition.fixedProductMarketMakers[0].id.toLowerCase()))&&void 0!==r?r:[],...null!==(i=null==x?void 0:x.redemptions.map(e=>e.condition.fixedProductMarketMakers[0].id.toLowerCase()))&&void 0!==i?i:[]])],[x]),{data:b}=(0,eg.useQuery)(["/api/partial-position-markets",y],()=>(0,ef.Dl)(y,[]),{staleTime:3e5,cacheTime:3e5,keepPreviousData:!0,refetchOnReconnect:!1,refetchOnWindowFocus:!1,enabled:!!(n!==ep.d&&y.length)}),C=(0,k.useMemo)(()=>x&&b?(0,_.uniqBy)((0,eh.Td)(b,x),"hash"):[],[b,x]),$=(0,k.useMemo)(()=>d===p.All?C:C.filter(e=>d===p.AllLiquidity?"Liquidity Added"===e.action||"Liquidity Removed"===e.action:d===p.AllTrades?"Bought"===e.action||"Sold"===e.action:d===p.Redeem?"Redemption"===e.action:"Buy"===d?"Bought"===e.action:"Sell"===d?"Sold"===e.action:e.action===d).sort((e,t)=>eT(e,t,o)),[C,d,o]),z=(0,k.useMemo)(()=>$.filter(e=>!a||e.marketName.toLowerCase().includes(a.toLowerCase())),[$,a]),D=(0,k.useMemo)(()=>z.sort((e,t)=>eT(e,t,o)),[z,o]),S=(0,k.useMemo)(()=>m||g||!j&&!b,[j,g,m,b]);return(0,k.useEffect)(()=>{h(C)},[C]),(0,v.jsx)(w.kC,{css:{flexDirection:"column",rowGap:"0.5rem",pb:"1rem"},children:(0,v.jsxs)(w.kC,{css:{flexDirection:"column"},children:[(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$6",position:"sticky",backgroundColor:"white",zIndex:1,borderBottom:"1px solid $gray6",pt:"$4",pb:"$2",top:"110px","@notDesktop":{display:"none"}},children:[(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Type"})}),(0,v.jsx)(eI,{flex:5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Market"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Outcome"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Shares"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Value"})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Date"})})]}),u?(0,v.jsx)(w.kC,{css:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",my:"2.5rem"},children:(0,v.jsx)(V.xv,{children:"There was an error loading your activity. Please try refreshing the page."})}):S?(0,v.jsx)(v.Fragment,{children:Array.from({length:20}).map(()=>(0,v.jsx)(eH,{tab:f.History},(0,_.uniqueId)("port-hist-skel-")))}):j?(0,v.jsx)(w.kC,{css:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",my:"2.5rem"},children:(0,v.jsx)(V.xv,{size:"md",weight:"medium",children:"No activity found."})}):(0,v.jsx)(v.Fragment,{children:D.map(e=>(0,v.jsx)(e3,{activityFeedItem:e},"".concat(e.hash,"_").concat(e.timestamp)))})]})})};var e5=s(69087),e6=s(533);let e9=(0,M.zo)(D.z,{flex:.7,height:"40px",fontFamily:"$sauce700 !important",fontSize:"$md"}),e8=e=>{let{liquidityPosition:t}=e,[s,r]=(0,k.useState)("");return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.kC,{css:{flexDirection:"column",width:"100%",borderBottom:"1px solid $gray6","@notDesktop":{display:"none"}},children:(0,v.jsxs)(eO,{children:[(0,v.jsxs)(eI,{flex:5,css:{gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:t.icon,size:32,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:t.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eslug?"/event/".concat(t.eslug,"/").concat(t.slug):"/market/".concat(t.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:t.market})})]}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.liquidityShares).format("0,0.000000"),children:z()(t.liquidityShares).format("0,0")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.sharesValue).format("$0,0.000000"),children:z()(t.sharesValue).format("$0,0.00")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.poolPercentage).divide(100).format("0.000000%"),children:.01>Number(z()(t.poolPercentage).value())?"<0.01%":z()(t.poolPercentage).divide(100).format("0.00%")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",title:z()(t.fees).format("$0,0.000000"),children:z()(t.fees).format("$0,0.00")})}),(0,v.jsx)(eI,{flex:1.75,justify:"right",children:(0,v.jsx)(eU(),{href:t.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eslug?"/event/".concat(t.eslug,"/").concat(t.slug):"/market/".concat(t.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(e9,{type:"primary",as:"a",children:"Manage"})})})]})}),(0,v.jsx)(eP,{type:"single",collapsible:!0,value:s,onValueChange:e=>r(e),css:{py:"$4","@laptops":{display:"none"}},children:(0,v.jsxs)(eE,{value:t.slug,children:[(0,v.jsxs)(eO,{css:{height:"auto"},children:[(0,v.jsxs)(eI,{css:{gap:"$1",flexDirection:"column",alignItems:"start"},children:[(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:t.icon,size:40,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:t.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eslug?"/event/".concat(t.eslug,"/").concat(t.slug):"/market/".concat(t.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",weight:"semi",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:t.market})})]}),(0,v.jsx)(eV,{asChild:!0,children:(0,v.jsxs)(eA,{css:{mt:"$1"},children:[s===t.slug?"Less":"More",(0,v.jsx)(e6.F,{css:{pb:"1px",size:"20px",color:"$gray3 !important",transition:"all 0.2s",...s===t.slug&&{transform:"rotate(-180deg)"},...""===s&&{transform:"rotate(0deg)"}}})]})})]}),(0,v.jsxs)(eI,{flex:.35,css:{flexDirection:"column",alignItems:"end",gap:"$2"},children:[(0,v.jsx)(V.xv,{size:"sm",weight:"semi",children:z()(t.sharesValue).format("$0,0.00")}),(0,v.jsx)(V.xv,{size:"sm",weight:"medium",css:{color:"$gray3 !important"},children:.01>Number(z()(t.poolPercentage).value())?"<0.01%":z()(t.poolPercentage).divide(100).format("0.00%")})]})]}),(0,v.jsx)(eL,{css:{mt:"$3"},children:(0,v.jsxs)(w.kC,{css:{flex:1,backgroundColor:"$gray6_50",borderRadius:"$sm",p:"$3",gap:"$3"},children:[(0,v.jsxs)(w.kC,{css:{gap:"$5",flex:1,justifyContent:"start"},children:[(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Shares"}),(0,v.jsx)(V.xv,{size:"sm",weight:"normal",children:z()(t.liquidityShares).format("0,0")})]}),(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Value"}),(0,v.jsx)(V.xv,{size:"sm",weight:"normal",children:z()(t.sharesValue).format("$0,0.00")})]}),(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Pool %"}),(0,v.jsx)(V.xv,{size:"sm",weight:"normal",children:.01>Number(z()(t.poolPercentage).value())?"<0.01%":z()(t.poolPercentage).divide(100).format("0.00%")})]}),(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Fees"}),(0,v.jsx)(V.xv,{size:"sm",weight:"normal",children:z()(t.fees).format("$0,0.00")})]})]}),(0,v.jsx)(w.kC,{css:{justifyContent:"flex-end"},children:(0,v.jsx)(eU(),{href:t.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:t.eslug?"/event/".concat(t.eslug,"/").concat(t.slug):"/market/".concat(t.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(e9,{type:"primary",as:"a",css:{gap:"$1",alignItems:"center",height:"36px !important"},children:"Manage"})})})]})})]})},t.slug)]})},e7=()=>{let{sortPortfolioLiquidityBy:e,portfolioSearchQuery:t,redeemableStatus:s}=em(),{markets:r,areLiquidityPositionsLoading:i,liquidityPositions:n,hasFetchedMarkets:o}=(0,T.Z)(),a=(0,k.useMemo)(()=>null==r?void 0:r.filter(e=>{switch(s){case g.All:return!0;case g.Active:return!e.closed;case g.Ended:return e.closed;default:return!0}}),[s,r]),l=(0,k.useMemo)(()=>(null==r?void 0:r.length)&&(null==n?void 0:n.length)?(0,e5.I)(null!=a?a:[],n).sort((t,s)=>eR(t,s,e,a)):[],[a,n,r,e]),c=(0,k.useMemo)(()=>l.filter(e=>!t||e.market.toLowerCase().includes(t.toLowerCase())),[t,l]),d=(0,k.useMemo)(()=>!i&&o&&(null==n?void 0:n.length)===0&&0===c.length,[i,o,n,c]);return(0,v.jsx)(w.kC,{css:{flexDirection:"column",rowGap:"0.5rem",pb:"1rem"},children:(0,v.jsxs)(w.kC,{css:{flexDirection:"column"},children:[(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$6",position:"sticky",backgroundColor:"white",zIndex:1,borderBottom:"1px solid $gray6",pt:"$4",pb:"$2",top:"110px","@notDesktop":{display:"none"}},children:[(0,v.jsx)(eI,{flex:5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Market"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Shares"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Value"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Pool %"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Fees"})}),(0,v.jsx)(eI,{flex:1.75,justify:"right",children:" "})]}),i?Array.from({length:20}).map(()=>(0,v.jsx)(eH,{tab:f.Liquidity},(0,_.uniqueId)("port-liq-skel-"))):d?(0,v.jsx)(w.kC,{css:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",my:"2.5rem"},children:(0,v.jsx)(V.xv,{size:"md",weight:"medium",children:"No liquidity positions found."})}):c.map(e=>(0,v.jsx)(e8,{liquidityPosition:e},e.slug))]})})};var te=s(6992),tt=s(71099),ts=s(84754);let tr=e=>{try{var t,s;return{icon:e.marketObj.image,question:e.marketObj.question,slug:e.marketObj.slug,eslug:(null===(t=e.marketObj.events)||void 0===t?void 0:t.length)?e.marketObj.events[0].slug:void 0,side:e.side,outcome:e.outcome,outcomeIndex:e.marketObj.outcomes.indexOf(e.outcome),availableQty:parseFloat(e.available_size),totalQty:parseFloat(e.size),price:parseFloat(e.price),time:parseInt(e.timestamp),orderID:e.orderID,endDate:new Date(null!==(s=e.marketObj.end_date)&&void 0!==s?s:0).getTime()}}catch(r){throw(0,ev.S3)(r,"fromOpenOrderToOpenOrderPortfolioItem"),r}},ti=e=>{if(0===e.length)return[];try{return e.map(e=>tr(e))}catch(t){return(0,ev.S3)(t,"fromOpenOrdersToOpenOrderPortfolioItems"),[]}},tn=e=>{if(0===e.length)return{};try{return(0,_.groupBy)(ti(e),"slug")}catch(t){return(0,ev.S3)(t,"fromOpenOrdersToGroupedOpenOrderPortfolioItems"),{}}},to=e=>{var t;return null!==e&&"string"!=typeof(null==e?void 0:null===(t=e.creds)||void 0===t?void 0:t.key)};var ta=s(21190),tl=s(47214),tc=s(6134),td=s(62882),th=s(21267);let tx=(0,M.zo)(td.aJ,{border:"none",borderRadius:"4px",cursor:"pointer",backgroundColor:"white",padding:"$1",transition:"all 0.2s",height:"30px",width:"30px","* >":{userSelect:"none"},"&:hover":{backgroundColor:"$gray6"},"&:active":{backgroundColor:"$gray5"},"&:disabled":{cursor:"not-allowed"}}),tu=(0,M.zo)(td._v,{transformOrigin:"var(--radix-tooltip-content-transform-origin)","@media (prefers-reduced-motion: no-preference)":{animationDuration:"100ms"}}),tm=e=>{let{mode:t,callback:s,css:r}=e,{isRestrictedLocation:i,hasFetchedLocation:n}=(0,th.q0)(),o=(0,k.useMemo)(()=>n&&i?"Unavailable":"single"===t?"Cancel":"Cancel all",[n,i,t]);return(0,v.jsx)(td.zt,{children:(0,v.jsxs)(td.u,{children:[(0,v.jsx)(tx,{onClick(e){e.preventDefault(),s()},disabled:n&&i,css:{...r&&{...r}},children:(0,v.jsx)(tl.x,{css:{size:"22px",color:"$red !important",...n&&i&&{opacity:.5}}})}),(0,v.jsx)(td.NM,{children:(0,v.jsxs)(tu,{side:"top",align:"center",sideOffset:4,onPointerDownOutside:e=>e.preventDefault(),children:[o,(0,v.jsx)(td.Ce,{})]})})]})})};var tp=s(32192),tg=s(46513);let tf=(0,M.zo)(tp.E.div,{}),tj=e=>{let{setShow:t,children:s}=e;console.log("PortfolioOpenOrdersMobileDrawer > render");let r=(0,k.useRef)(null),i=(0,tg._)(),n={type:"spring",stiffness:500,damping:30};return(0,k.useEffect)(()=>{i.start({y:20,transition:n})},[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(tf,{ref:r,css:{position:"fixed",right:0,left:0,bottom:0,zIndex:99998,pb:"$5",backgroundColor:"#ffffff",width:"100vw",minHeight:"500px",maxHeight:"calc(100vh - 4rem)",overflowY:"auto",borderTopLeftRadius:"$md",borderTopRightRadius:"$md"},initial:{y:"100%"},animate:i,exit:{y:"100%"},transition:n,children:s},"portfolio-drawer"),(0,v.jsx)(tf,{css:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:99997,backgroundColor:"#000000",backdropFilter:"blur(8px)"},initial:{opacity:0},animate:{opacity:.4},exit:{opacity:0},onClick:()=>t(!1)},"portfolio-drawer-overlay")]})},tv=e=>{let{groupedOrders:t}=e,{clob:s}=(0,ts.dw)(),{refetchUserOpenOrders:r}=(0,tt.Z)(),{setToastState:i}=em(),[n,o]=(0,k.useState)(""),[a,l]=(0,k.useState)(!1),[c,d]=(0,k.useState)(!1),[h,x]=(0,k.useState)(),u=t.sort((e,t)=>t.price-e.price),m=(0,k.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{await (null==s?void 0:s.cancelOrder({orderID:e})),t||(r(),i({open:!0,type:"success",message:"Order cancelled"}))}catch(n){if(t)throw n;i({open:!0,type:"error",message:"Error cancelling order"})}},[s,r,i]),p=(0,k.useCallback)(async()=>{try{for(let e of u)await m(e.orderID,!0);i({open:!0,type:"success",message:"Orders cancelled"})}catch(t){i({open:!0,type:"error",message:"Error cancelling orders"})}finally{r(),d(!1)}},[m,r,i,d,u]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eP,{type:"single",collapsible:!0,value:n,onValueChange:e=>o(e),css:{"@notDesktop":{display:"none"}},children:(0,v.jsxs)(eE,{value:"item-1",children:[(0,v.jsxs)(eO,{children:[(0,v.jsxs)(eI,{flex:5,css:{gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:u[0].icon,size:32,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:u[0].eslug?P.Y.EventDetail:P.Y.MarketDetail,as:u[0].eslug?"/event/".concat(u[0].eslug,"/").concat(u[0].slug):"/market/".concat(u[0].slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:u[0].question})})]}),1===u.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{size:"md",children:(0,_.capitalize)(u[0].side)})}),(0,v.jsx)(eI,{children:(0,v.jsx)(eZ,{variant:0===u[0].outcomeIndex?"green":"red",children:u[0].outcome})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(u[0].price).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:"".concat(z()(u[0].totalQty-u[0].availableQty).format("0,0")," / ").concat(z()(u[0].totalQty).format("0,0"))})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(u[0].availableQty).format("0,0")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(u[0].totalQty*u[0].price).format("$0,0.00")})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(tm,{mode:"single",callback(){x(0),l(!0)}})})]}),u.length>1&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{children:"–"})}),(0,v.jsxs)(eI,{flex:2,justify:"right",children:[(0,v.jsx)(eV,{asChild:!0,children:(0,v.jsxs)(w.kC,{css:{flex:1,alignItems:"center",justifyContent:"flex-end",gap:"$1",color:"$gray3",fontSize:"$md !important",transition:"all 0.2s",cursor:"pointer","&:hover":{color:"$gray2",svg:{color:"$gray2 !important"}},"&:active":{color:"$gray1",svg:{color:"$gray1 !important"}}},children:[""===n?"".concat(u.length," orders"):"Hide",(0,v.jsx)(e6.F,{css:{size:"22px",color:"$gray3 !important",transition:"all 0.2s",...""!==n&&{transform:"rotate(-180deg)"},...""===n&&{transform:"rotate(0deg)"}}})]})}),(0,v.jsx)(tm,{mode:"multiple",callback:()=>l(!0)})]})]})]}),u.length>1&&(0,v.jsx)(eL,{children:u.map((e,t)=>(0,v.jsxs)(eO,{children:[(0,v.jsx)(eI,{flex:5,children:"\xa0"}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{size:"md",children:(0,_.capitalize)(e.side)})}),(0,v.jsx)(eI,{children:(0,v.jsx)(eZ,{variant:0===e.outcomeIndex?"green":"red",children:e.outcome})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(e.price).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:"".concat(z()(e.totalQty-e.availableQty).format("0,0")," / ").concat(z()(e.totalQty).format("0,0"))})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(e.availableQty).format("0,0")})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(u[0].totalQty*u[0].price).format("$0,0.00")})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(tm,{mode:"single",callback(){x(t),l(!0)}})})]},e.orderID))})]})}),(0,v.jsxs)(w.kC,{css:{flexDirection:"column",width:"100%",borderBottom:"1px solid $gray6",py:"$4",gap:"$2","@laptops":{display:"none"}},children:[(0,v.jsxs)(eO,{css:{height:"auto",alignItems:"start"},children:[(0,v.jsx)(eI,{flex:1,css:{gap:"$1",flexDirection:"column",alignItems:"start"},children:(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3",alignItems:"center"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:u[0].icon,size:40,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:u[0].eslug?P.Y.EventDetail:P.Y.MarketDetail,as:u[0].eslug?"/event/".concat(u[0].eslug,"/").concat(u[0].slug):"/market/".concat(u[0].slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",weight:"semi",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:u[0].question})})]})}),(0,v.jsx)(eI,{flex:.35,css:{flexDirection:"column",justifyContent:"flex-start",alignItems:"end",gap:"$1"},children:(0,v.jsx)(tm,{mode:u.length>1?"multiple":"single",callback(){1===u.length?(x(0),l(!0)):(x(void 0),l(!0))},css:{transform:"translateY(-2px)"}})})]}),(0,v.jsxs)(eO,{css:{height:"auto"},children:[1===u.length&&(0,v.jsxs)(w.kC,{css:{flex:1,justifyContent:"space-between"},children:[(0,v.jsx)(e1,{heading:"".concat((0,_.capitalize)(u[0].side)," ").concat(u[0].outcome),subheading:"".concat(z()(u[0].price).multiply(100).format("0"),"\xa2"),align:"left"}),(0,v.jsx)(e1,{heading:"".concat(z()(u[0].totalQty-u[0].availableQty).format("0,0")," / ").concat(z()(u[0].totalQty).format("0,0")),subheading:"".concat(z()(u[0].availableQty).format("0,0")," remaining"),align:"right"})]}),u.length>1&&(0,v.jsxs)(D.z,{type:"secondary",height:"md",fontSize:"md",fontWeight:"medium",css:{width:"100%",color:"$gray3 !important",mt:"$2"},onClick(){x(void 0),d(!0)},children:[u.length," open"]})]})]}),(0,v.jsx)(ta.M,{children:c&&(0,v.jsxs)(tj,{setShow:d,children:[(0,v.jsxs)(w.kC,{css:{width:"100%",flexDirection:"column",px:"$4",pt:"$8",pb:"$4",gap:"$4",borderBottom:"1px solid $gray6",position:"sticky",backgroundColor:"white",top:"0",zIndex:1},children:[(0,v.jsxs)(w.kC,{css:{flex:1,justifyContent:"space-between"},children:[(0,v.jsxs)(V.xv,{size:"md",weight:"bold",children:[u.length," Orders"]}),(0,v.jsx)(V.xv,{size:"md",weight:"semi",css:{color:"$red !important",cursor:"pointer","&:hover":{opacity:"0.8"},"&:active":{opacity:"0.7"}},onClick(){x(void 0),l(!0)},children:"Cancel all"})]}),(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3",alignItems:"center"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:u[0].icon,size:40,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:u[0].eslug?P.Y.EventDetail:P.Y.MarketDetail,as:u[0].eslug?"/event/".concat(u[0].eslug,"/").concat(u[0].slug):"/market/".concat(u[0].slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",weight:"normal",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:u[0].question})})]})]}),(0,v.jsx)(w.kC,{css:{flexDirection:"column"},children:u.map((e,t)=>(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$2",p:"$4",borderBottom:"1px solid $gray6"},children:[(0,v.jsxs)(w.kC,{css:{flex:1,justifyContent:"space-between"},children:[(0,v.jsx)(e1,{heading:"".concat((0,_.capitalize)(e.side)," ").concat(e.outcome),subheading:"".concat(z()(e.price).multiply(100).format("0"),"\xa2"),align:"left"}),(0,v.jsx)(e1,{heading:"".concat(z()(e.totalQty-e.availableQty).format("0,0")," / ").concat(z()(e.totalQty).format("0,0")),subheading:"".concat(z()(e.availableQty).format("0,0")," remaining"),align:"right"})]}),(0,v.jsx)(w.kC,{css:{alignItems:"center",transform:"translateX(4px)"},children:(0,v.jsx)(tm,{mode:"single",callback(){x(t),l(!0)}})})]},e.orderID))})]})}),a&&(0,v.jsx)(tc.Vq,{defaultOpen:!0,open:a,onOpenChange:l,children:(0,v.jsxs)(tc.cZ,{css:{"@laptops":{maxWidth:"350px"},"@notDesktop":{maxWidth:"calc(100vw - 1rem)"}},children:[(0,v.jsx)(tc.GG,{"aria-label":"Close",asChild:!0,children:(0,v.jsx)(tl.x,{css:{position:"absolute",right:"1.5rem",top:"1.875rem",cursor:"pointer"},size:24,onClick(){x(void 0),l(!1)}})}),(0,v.jsx)(tc.$N,{children:(0,v.jsx)(V.h4,{variant:"primary",css:{lineHeight:"$md"},children:"Are you sure?"})}),(0,v.jsx)(tc.Be,{children:(0,v.jsx)(V.xv,{size:"md",css:{textAlign:"center"},children:void 0===h?"You will cancel ".concat(u.length," open orders."):"Are you sure you want to cancel this open order?"})}),(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$4",pt:"$3"},children:[(0,v.jsx)(D.z,{type:"quaternary",color:"gray5",height:"md",fontSize:"md",fontWeight:"bold",onClick(){x(void 0),l(!1)},css:{flex:1},children:"Never mind"}),(0,v.jsx)(D.z,{type:"primary",color:"red",height:"md",fontSize:"md",fontWeight:"bold",async onClick(){let e=void 0===h;e?p():m(u[h].orderID),x(void 0),l(!1),e&&d(!1)},css:{flex:1},children:"Confirm"})]})]})})]})},ty=()=>{let{authenticated:e,authenticationType:t}=(0,Z.ec)(),{clob:s}=(0,ts.dw)(),{userOpenOrdersWithMarket:r,areMarketsLoading:i}=(0,tt.Z)(),{sortPortfolioOpenOrdersBy:n,portfolioSearchQuery:o}=em(),a=(0,k.useMemo)(()=>r.length?Object.values(tn(r)).sort((e,t)=>eM(e,t,n)):[],[n,r]),l=(0,k.useMemo)(()=>a.filter(e=>!o||e[0].question.toLowerCase().includes(o.toLowerCase())),[o,a]);return e?(0,v.jsx)(w.kC,{css:{flexDirection:"column",rowGap:"0.5rem",pb:"1rem"},children:"eoa"===t&&null===s||to(s)?(0,v.jsx)(w.kC,{css:{width:"100%",display:"flex",justifyContent:"center"},children:(0,v.jsx)(w.xu,{css:{width:"400px"},children:(0,v.jsx)(te.Z,{})})}):(0,v.jsxs)(w.kC,{css:{flexDirection:"column"},children:[(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$6",position:"sticky",backgroundColor:"white",zIndex:1,borderBottom:"1px solid $gray6",pt:"$4",pb:"$2",top:"110px","@notDesktop":{display:"none"}},children:[(0,v.jsx)(eI,{flex:5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Market"})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Side"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Outcome"})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Price"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Filled"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Remaining"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Total"})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:" "})]}),i?Array.from({length:20}).map(()=>(0,v.jsx)(eH,{tab:f.Orders},(0,_.uniqueId)("port-orders-skel-"))):l.length?l.map(e=>(0,v.jsx)(tv,{groupedOrders:e},e[0].slug)):(0,v.jsx)(w.kC,{css:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",my:"2.5rem"},children:(0,v.jsx)(V.xv,{size:"md",weight:"medium",children:"No open orders found."})})]})}):null};var tk=s(83204),tb=s(83461),tw=s(71567),tC=s(61903),t$=s(62337),tz=s(29422),tD=s(55845),tS=s(89017);let tM=(0,M.zo)(tS.c,{position:"relative",'&[data-state="open"]':{transform:"rotate(-180deg)"},"@media (prefers-reduced-motion: no-preference)":{transition:"transform 250ms ease"},variants:{color:{black:{color:"black !important"},dark:{color:"$shadeDarker !important"},medium:{color:"$shadeMedium !important"},light:{color:"$shadeWhite !important"}},orientation:{down:{transform:"rotate(0deg)"},up:{transform:"rotate(180deg)"},left:{transform:"rotate(90deg)"},right:{transform:"rotate(-90deg)"}}},defaultVariants:{color:"dark"}});var tR=s(17919),tT=s(4911),tI=s(58334);let tF={transition:"all 0.1s ease-in-out",display:"inline-block",width:"calc((100% / 7) - 4px)",border:"none",cursor:"pointer",py:"6px","@media (hover: hover), (pointer: fine)":{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)"}}},tO=(0,M.zo)(D.z,{borderRadius:"2px",color:"black",p:"$1"}),tZ=e=>{let t=(0,k.useRef)(),s=(0,k.useCallback)(e=>{let{selected:t,isInRange:s}=e,r=s?tI.Z.opaquePolyBlue:"";return t?tI.Z.polyBlue:r},[]),r=(0,k.useCallback)(e=>{let{selected:t,unavailable:s,isInRange:r}=e,i="black";return i=r?tI.Z.polyBlue:i,i=t?"white":i,i=s?tI.Z.offBlack:i},[]),i=()=>{t.current=null},n=s=>{!e.selected||Array.isArray(e.selected)&&!e.selected.length||(t.current=s)},o=(0,k.useCallback)(s=>{let{selected:r}=e,i=s.getTime();if(Array.isArray(r)&&r.length){let n=r[0].getTime();if(2!==r.length)return t.current&&(n<i&&t.current>=s||i<n&&s>=t.current);{let o=r[1].getTime();return n<i&&o>i}}return!1},[e.selected]),a=(0,k.useCallback)(t=>{let{selected:s}=e;if(Array.isArray(s)&&s.length){let r=(0,et.Z)(t).getTime(),i=(0,et.Z)(s[0]).getTime();if(2===s.length)return i===r}return!1},[e.selected]),l=(0,k.useCallback)(t=>{let{selected:s}=e;if(Array.isArray(s)&&s.length){let r=(0,et.Z)(t).getTime();if(2===s.length){let i=(0,et.Z)(s[1]).getTime();return i===r}}return!1},[e.selected]);return(0,v.jsx)(tD.Z,{...e,render(e){let{calendars:t,getDateProps:c,getBackProps:d,getForwardProps:h}=e;return t.length?(0,v.jsxs)(w.xu,{onMouseLeave:i,css:{textAlign:"center",position:"relative",maxWidth:"300px","@notDesktop":{maxWidth:"100%"}},children:[(0,v.jsxs)(w.xu,{css:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",top:"$3",left:"20px",right:"20px"},children:[(0,v.jsxs)(w.kC,{css:{alignItems:"center"},children:[(0,v.jsx)(tO,{type:"tertiary",...d({calendars:t,offset:12}),css:{borderRadius:"2px",color:"black"},children:(0,v.jsx)(tM,{color:"black",orientation:"left",css:{size:"20px"}})}),(0,v.jsx)(tO,{type:"tertiary",...d({calendars:t}),css:{borderRadius:"2px",color:"black"},children:(0,v.jsx)(e6.F,{color:"black",orientation:"left",css:{size:"20px"}})})]}),(0,v.jsxs)(w.kC,{css:{alignItems:"center"},children:[(0,v.jsx)(tO,{type:"tertiary",...h({calendars:t}),css:{borderRadius:"2px",color:"black"},children:(0,v.jsx)(e6.F,{color:"black",orientation:"right",css:{size:"20px"}})}),(0,v.jsx)(tO,{type:"tertiary",...h({calendars:t,offset:12}),css:{borderRadius:"2px",color:"black"},children:(0,v.jsx)(tM,{color:"black",orientation:"right",css:{size:"20px"}})})]})]}),t.map(e=>(0,v.jsxs)(w.xu,{css:{display:"inline-block",width:"100%",boxSizing:"border-box",padding:"0 10px 30px","@notDesktop":{padding:"0 10px 0"}},children:[(0,v.jsx)(w.xu,{css:{py:"18px"},children:(0,v.jsxs)(V.xv,{size:"md",weight:"semi",children:[(0,tR.Z)(e.month)," ",e.year]})}),tT.Z.map(t=>(0,v.jsx)(w.xu,{css:{...tF,background:"transparent"},children:(0,v.jsx)(V.xv,{size:"md",weight:"semi",children:t})},"".concat(e.month).concat(e.year).concat(t))),e.weeks.map((t,i)=>t.map((t,d)=>{let h="".concat(e.month).concat(e.year).concat(i).concat(d);if(!t)return(0,v.jsx)(w.xu,{css:{...tF,background:"transparent"}},h);let{date:x,selected:u,selectable:m}=t,p=o(x),g=a(x),f=l(x),j=s({selected:u,isInRange:!!p,unavailable:!m});return(0,v.jsx)(w.xu,{...c({dateObj:t,onMouseEnter(){n(x)}}),css:{...tF,minWidth:0,backgroundColor:j,position:"relative",borderRadius:p||u?0:2,borderTopLeftRadius:g?8:0,borderBottomLeftRadius:g?8:0,borderTopRightRadius:f?8:0,borderBottomRightRadius:f?8:0,...(p||f||g)&&{"&:hover":{backgroundColor:"".concat(j," !important"),opacity:.7}}},children:(0,v.jsx)(V.xv,{size:"md",css:{color:"".concat(r({selected:u,unavailable:!m,isInRange:p})," !important")},children:x.getDate()})},h)}))]},"".concat(e.month).concat(e.year)))]}):null}})},tA=e=>{let{handleCancel:t,handleSetDates:s,initialSelection:r}=e,[i,n]=(0,k.useState)(0),o=(0,k.useMemo)(()=>(0,et.Z)(new Date),[]),[a,l]=(0,k.useState)(r),c=e=>{let{selectable:t,date:s}=e;if(!t)return;let r=s.getTime(),i=[...a];if(a.length){if(1===a.length){let n=a[0].getTime();n<r?i.push(s):i.unshift(s),l(i)}else 2===i.length&&l([s])}else i.push(s),l(i)};return(0,v.jsxs)(w.gO,{css:{"@phones":{width:"100vw",maxWidth:"100vw",maxHeight:"calc(100vh - 216px)",overflowY:"scroll",top:0,pb:"48px"},"@tablets":{width:"100vw",maxWidth:"100vw",maxHeight:"calc(100vh - 160px)",overflowY:"scroll",top:0}},children:[(0,v.jsxs)(w.kC,{css:{display:"inline-flex","@phones":{flexDirection:"column-reverse"},"@tablets":{flexDirection:"column-reverse"},"@laptops":{flexDirection:"row"}},children:[(0,v.jsx)(w.xu,{css:{borderRight:"1px solid ".concat(tI.Z.opaquePolyBlue),"@laptops":{pt:"$2"}},children:(0,v.jsxs)(tw.Z,{sx:{"> li":{pl:4}},children:[(0,v.jsx)(tC.Z,{onClick(){l([o,(0,er.Z)(o)]),n(0)},selected:2===a.length&&a[0].getDate()===o.getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Today"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,es.Z)(o,{days:1}),(0,es.Z)(o,{seconds:1})]),n(0)},selected:2===a.length&&a[0].getTime()===(0,es.Z)(o,{days:1}).getTime()&&(0,et.Z)(a[1]).getTime()===(0,es.Z)(o,{days:1}).getTime(),dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Yesterday"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,es.Z)(o,{weeks:1}),o]),n(0)},selected:2===a.length&&a[0].getTime()===(0,es.Z)(o,{weeks:1}).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Last Week"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,es.Z)(o,{months:1}),o]),n(-1)},selected:2===a.length&&a[0].getTime()===(0,es.Z)(o,{months:1}).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Last Month"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,es.Z)(o,{months:3}),o]),n(-3)},selected:2===a.length&&a[0].getTime()===(0,es.Z)(o,{months:3}).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),sx:{pr:7},dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Last 3 Months"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,et.Z)(new Date(new Date().getFullYear(),0,1)),o]),n(-new Date().getMonth())},selected:2===a.length&&a[0].getTime()===(0,et.Z)(new Date(new Date().getFullYear(),0,1)).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),sx:{pr:7},dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Year to Date"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,es.Z)(o,{years:1}),o]),n(-12)},selected:2===a.length&&a[0].getTime()===(0,es.Z)(o,{years:1}).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),sx:{pr:7},dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"Last Year"})}),(0,v.jsx)(tC.Z,{onClick(){l([(0,et.Z)(new Date(2020,9,1)),o]),n(-(0,t$.Z)(o,new Date(2020,9,1)))},selected:2===a.length&&a[0].getTime()===(0,et.Z)(new Date(2020,9,1)).getTime()&&(0,et.Z)(a[1]).getTime()===o.getTime(),sx:{pr:7},dense:!!window&&(null==window?void 0:window.innerWidth)<600,children:(0,v.jsx)(V.xv,{size:"md",children:"All"})})]})}),(0,v.jsx)(w.xu,{css:{pt:2,width:"300px","@phones":{width:"100%"},"@tablets":{width:"420px"}},children:(0,v.jsx)(tZ,{date:o,selected:a,onDateSelected:c,monthsToDisplay:1,maxDate:(0,tz.Z)(o,{days:1,seconds:-1}),offset:i,onOffsetChanged:n})})]}),(0,v.jsxs)(w.kC,{css:{justifyContent:"flex-end",py:"$2",pr:"$3",borderTop:"1px solid $opaquePolyBlue",gap:"$2"},children:[(0,v.jsx)(D.z,{type:"quaternary",onClick:t,children:"Cancel"}),(0,v.jsx)(D.z,{type:"primary",onClick(){s([(0,et.Z)(a[0]),(0,er.Z)(a[1])])},children:"Set Dates"})]})]})};var tB=s(64050);let tP=(0,M.zo)(tB.R,{position:"relative",variants:{color:{black:{color:"black !important"},dark:{color:"$shadeDarker !important"},medium:{color:"$shadeMedium !important"},light:{color:"$shadeWhite !important"}}},defaultVariants:{color:"dark"}});var tE=s(62144);let tV=(0,M.zo)(tE.y,{position:"relative"});var tL=s(687);let tq=(0,M.zo)(tL.G,{position:"relative"});var tN=s(21314),tW=s(63681),tQ=s(80937);let t_=(0,M.zo)(tQ.fC,{}),tH=(0,M.zo)(tQ.h_,{});(0,M.zo)(tQ.ee,{});let tY=(0,M.zo)(tQ.VY,{zIndex:999,backgroundColor:"$shadeWhite",borderRadius:"10px",border:"1px solid $shadeMediumTransparent",boxShadow:"$dropShadowMd",overflowX:"hidden",overflowY:"auto","@media (prefers-reduced-motion: no-preference)":{animationDuration:"600ms",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",willChange:"transform, opacity",'&[data-state="open"]':{'&[data-side="top"]':{animationName:E.Qb},'&[data-side="right"]':{animationName:E.cT},'&[data-side="bottom"]':{animationName:E.xm},'&[data-side="left"]':{animationName:E.Pp}}}}),tG=(0,M.zo)(tQ.xz,{}),tU=(0,M.zo)("button",{all:"unset",height:"45px",width:"100%",display:"inline-flex",padding:"0 1rem",alignItems:"center",justifyContent:"space-between",outlineWidth:"2px",outlineStyle:"solid",outlineOffset:"-1px",borderRadius:"10px",border:"1px solid $transparent",overflow:"hidden",backgroundColor:"$shadeWhite",color:"$shadeBlack",fontFamily:"$sauce400",fontSize:"$md",cursor:"pointer",transition:"all 0.2s ease","@phones":{width:"100%"},"@tablets":{width:"100%"},"@laptops":{width:"184px !important"},'&[data-state="open"]':{outlineColor:"$shadeDarker",svg:{transform:"rotate(-180deg)"}},'&[data-state="closed"]':{border:"1px solid $shadeMedium",outlineColor:"$transparent","&:hover":{backgroundColor:"$shadeMediumTransparent"}}}),tX=(0,k.forwardRef)((e,t)=>{let{children:s,...r}=e;return(0,v.jsx)(tH,{container:document.getElementById("app_body"),children:(0,v.jsx)(tY,{...r,ref:t,children:s})})});tX.displayName="Content";let tJ=(0,M.zo)(tX),tK=()=>{let{selectedTab:e,sortPortfolioMarketsBy:t,sortPortfolioOpenOrdersBy:s,sortPortfolioLiquidityBy:r,sortPortfolioHistoryBy:i,setSortPortfolioMarketsBy:n,setSortPortfolioOpenOrdersBy:o,setSortPortfolioLiquidityBy:a,setSortPortfolioHistoryBy:l}=em(),c=(0,k.useMemo)(()=>{switch(e){case f.Positions:return{sortBy:t,setSortBy:n,sortByVariables:Object.values(h)};case f.Orders:return{sortBy:s,setSortBy:o,sortByVariables:Object.values(x)};case f.Liquidity:return{sortBy:r,setSortBy:a,sortByVariables:Object.values(u)};case f.History:return{sortBy:i,setSortBy:l,sortByVariables:Object.values(m)};default:return{sortBy:t,setSortBy:n,sortByVariables:Object.values(h)}}},[e,l,a,n,o,i,r,t,s]);return c},t0=e=>{let{css:t}=e,{selectedTab:s,portfolioHistoryStartDate:r,portfolioHistoryEndDate:i,portfolioHistoryActionFilter:n,redeemableStatus:o,setPortfolioSearchQuery:a,setPortfolioHistoryStartDate:l,setPortfolioHistoryEndDate:c,setPortfolioHistoryActionFilter:d,setRedeemableStatus:h,setShowRedeemAllModal:x,csvFormattedHistory:u}=em(),{sortBy:m,setSortBy:j,sortByVariables:y}=tK(),[b,C]=(0,k.useState)(!1),[$,z]=(0,k.useState)(null),S=(0,k.useRef)(),M=Boolean($),[R,T]=(0,k.useState)(),I=(0,k.useDeferredValue)(R),F=e=>{l(e[0]),c(e[1])},O=e=>{z(e.currentTarget)},Z=()=>{z(null)};return((0,k.useEffect)(()=>{a(I)},[I]),(0,tk.Z)("keydown",e=>{"Escape"===e.key&&S.current&&document.activeElement===S.current&&S.current.blur()}),(0,Q.Z)(()=>C(!0)),b)?(0,v.jsxs)(w.kC,{css:{width:"100%",position:"sticky",backgroundColor:"white",zIndex:2,"@laptops":{top:"49px",pt:"$4",pb:"1px",gap:"$4"},"@notDesktop":{top:"149px",pt:"$4",pb:"$1",px:"$2",gap:"$2",width:"100vw",transform:"translateX(-0.5rem)",flexWrap:"wrap",rowGap:"$1",boxShadow:"$dropShadowMdLight"},...t&&{...t}},children:[(0,v.jsxs)(w.kC,{css:{flex:1,position:"relative","@notDesktop":{height:"45px",...s===f.Positions&&{flex:1}}},children:[(0,v.jsx)(tW.I,{ref:S,value:R,onValueChange:T,placeholder:"Search markets",css:{pl:"$9",borderRadius:"$md","&::placeholder":{color:"$gray3"}}}),(0,v.jsx)(w.kC,{css:{position:"absolute",alignSelf:"center",left:"16px"},children:(0,v.jsx)(tq,{css:{size:"16px",color:"$gray3",transition:"0.2s all",...!!R&&{transition:"0.2s all",color:"black !important"}}})})]}),s===f.Positions&&(0,v.jsx)(D.z,{type:"quaternary",color:"green",fontSize:"md",fontWeight:"bold",css:{width:"140px",height:"45px !important",order:10,lineHeight:"21px","@notDesktop":{width:"120px",px:"$2",order:1,borderRadius:"$md"}},onClick:()=>x(!0),children:"Redeem all"}),(0,v.jsx)(w.kC,{css:{flexBasis:"100%",width:0,"@laptops":{display:"none"},"@notDesktop":{order:3}}}),(s===f.Positions||s===f.Liquidity)&&(0,v.jsx)(w.kC,{css:{gap:"1rem",alignItems:"center","@notDesktop":{flex:.5,order:4}},children:(0,v.jsxs)(tN.h_,{children:[(0,v.jsx)(tN.$F,{asChild:!0,children:(0,v.jsxs)(tN.r0,{"aria-label":"redeemable status",css:{borderRadius:"10px",cursor:"pointer",boxSizing:"border-box","@laptops":{width:"160px !important"},"@notDesktop":{borderRadius:"$md"}},children:[(0,v.jsx)(tN.Ju,{css:{fontFamily:"$sauce500 !important"},children:o}),(0,v.jsx)(e6.F,{})]})}),(0,v.jsx)(tN.AW,{variant:"portfolioFilters",sideOffset:0,align:"start",collisionPadding:{top:100},children:(0,v.jsx)(tN._x,{value:o,onValueChange(e){h(e)},children:Object.values(g).map(e=>(0,v.jsx)(tN.qB,{value:e,children:e},e))})})]})}),s===f.History&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.kC,{css:{"@notDesktop":{flex:1,order:6}},children:(0,v.jsxs)(t_,{open:M,onOpenChange(e){if(!e){Z();return}if((null==window?void 0:window.innerWidth)<1018){var t;null===(t=null==document?void 0:document.getElementById("app_body"))||void 0===t||t.scrollTo({top:360,behavior:"smooth"})}},modal:!0,children:[(0,v.jsx)(tG,{asChild:!0,children:(0,v.jsxs)(tU,{"aria-describedby":M?"calendar-popover":void 0,onClick:O,css:{width:"unset !important",justifyContent:"center",gap:"$2",px:"$5",boxSizing:"border-box","@notDesktop":{borderRadius:"$md !important",flex:1},'&[data-state="open"]':{svg:{transform:"rotate(0deg)"}}},children:[(0,v.jsx)(tP,{color:"black",css:{size:"24px"}}),(0,v.jsx)(V.xv,{weight:"medium",css:{fontSize:"inherit"},children:"Filter"})]})}),(0,v.jsx)(tJ,{align:"start",sideOffset:window&&(null==window?void 0:window.innerWidth)<600?1:10,sticky:"always",children:(0,v.jsx)(tA,{handleCancel(){Z()},handleSetDates(e){F(e),Z()},initialSelection:r&&i&&[r,i]})})]})}),(0,v.jsx)(w.kC,{css:{gap:"1rem",alignItems:"center","@notDesktop":{flex:1,order:7}},children:(0,v.jsxs)(tN.h_,{children:[(0,v.jsx)(tN.$F,{asChild:!0,children:(0,v.jsxs)(tN.r0,{"aria-label":"transaction type",css:{borderRadius:"10px",cursor:"pointer",boxSizing:"border-box","@laptops":{width:"160px !important"},"@notDesktop":{maxWidth:"calc(100vw - 1rem)",borderRadius:"$md"}},children:[(0,v.jsx)(tN.Ju,{css:{fontFamily:"$sauce500 !important"},children:n}),(0,v.jsx)(e6.F,{})]})}),(0,v.jsx)(tN.AW,{variant:"portfolioFilters",sideOffset:0,align:"center",collisionPadding:{top:100},children:(0,v.jsx)(tN._x,{value:n,onValueChange(e){d(e)},children:Object.values(p).map(e=>(0,v.jsx)(tN.qB,{value:e,children:e},e))})})]})}),(0,v.jsx)(D.z,{type:"quaternary",color:"blue",fontSize:"md",fontWeight:"bold",css:{height:"45px !important",order:10,borderRadius:"$md","@notDesktop":{order:2}},children:(0,v.jsxs)(tb.CSVLink,{filename:"Polymarket-Transaction-History-".concat(new Date,".csv"),data:u,style:{display:"flex",gap:"8px",lineHeight:"21px",width:"100%"},children:[(0,v.jsx)(tV,{css:{size:"22px"}}),"Export"]})})]}),(0,v.jsx)(w.kC,{css:{gap:"1rem",alignItems:"center",order:7,"@notDesktop":{flex:.5,...s===f.Orders&&{order:2},...s===f.History&&{flex:1,order:8}}},children:(0,v.jsxs)(tN.h_,{children:[(0,v.jsx)(tN.$F,{asChild:!0,children:(0,v.jsxs)(tN.r0,{"aria-label":"sort by",css:{borderRadius:"10px",cursor:"pointer",boxSizing:"border-box","@laptops":{width:"160px !important"},"@notDesktop":{borderRadius:"$md"}},children:[(0,v.jsx)(tN.Ju,{css:{fontFamily:"$sauce500 !important"},children:m}),(0,v.jsx)(e6.F,{})]})}),(0,v.jsx)(tN.AW,{variant:"portfolioFilters",sideOffset:0,align:"end",collisionPadding:{top:100},children:(0,v.jsx)(tN._x,{value:m,onValueChange:j,children:y.map(e=>(0,v.jsx)(tN.qB,{value:e,children:e},e))})})]})})]}):null};var t1=s(28575);let t2=e=>{let{groupedPositions:t}=e,[s,...r]=t,[i,n]=(0,k.useState)(t.map(()=>""));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(w.kC,{css:{flexDirection:"column",width:"100%",borderBottom:"1px solid $gray6","@notDesktop":{display:"none"}},children:[(0,v.jsxs)(eO,{children:[(0,v.jsxs)(eI,{flex:4,css:{gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:s.icon,size:32,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:s.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:s.eslug?"/event/".concat(s.eslug,"/").concat(s.slug):"/market/".concat(s.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:s.market})})]}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(eZ,{variant:0===s.outcomeIndex?"green":"red",children:s.outcome})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(s.priceAvg).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(s.priceCurr).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(s.qty).format("0,0")})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(s.currentMarketValue).format("$0,0.00")," ",(0,v.jsx)(w.Dr,{css:{color:0>Number(z()(s.loss).value())?"$red":"$green2"},children:"(".concat(z()(s.loss).divide(100).format("-0.00%"),")")})]})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eU(),{href:s.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:s.eslug?"/event/".concat(s.eslug,"/").concat(s.slug):"/market/".concat(s.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(D.z,{type:s.isClosed?"quaternary":"primary",color:s.isClosed?"green":void 0,height:"md",fontSize:"md",fontWeight:"bold",as:"a",css:{gap:"$1",alignItems:"center",width:"100px"},children:s.isClosed?"Redeem":"Trade"})})})]}),r.map(e=>(0,v.jsxs)(eO,{children:[(0,v.jsx)(eI,{flex:4,children:"\xa0"}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(eZ,{variant:0===e.outcomeIndex?"green":"red",children:e.outcome})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(e.priceAvg).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(e.priceCurr).multiply(100).format("0"),"\xa2"]})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{size:"md",children:z()(e.qty).format("0,0")})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsxs)(V.xv,{size:"md",children:[z()(e.currentMarketValue).format("$0,0.00")," ",(0,v.jsx)(w.Dr,{css:{color:0>Number(z()(e.loss).value())?"$red":"$green2"},children:"(".concat(z()(e.loss).divide(100).format("-0.00%"),")")})]})}),(0,v.jsx)(eI,{flex:2,justify:"right",children:(0,v.jsx)(eU(),{href:e.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:e.eslug?"/event/".concat(e.eslug,"/").concat(e.slug):"/market/".concat(e.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(D.z,{type:e.isClosed?"quaternary":"primary",color:e.isClosed?"green":void 0,height:"md",fontSize:"md",fontWeight:"bold",as:"a",css:{width:"100px"},children:e.isClosed?"Redeem":"Trade"})})})]},e.slug))]}),t.map((e,t)=>(0,v.jsx)(eP,{type:"single",collapsible:!0,value:i[t],onValueChange:e=>n([...i.slice(0,t),e,...i.slice(t+1)]),css:{py:"$4","@laptops":{display:"none"}},children:(0,v.jsxs)(eE,{value:e.outcome,children:[(0,v.jsxs)(eO,{css:{height:"auto"},children:[(0,v.jsxs)(eI,{css:{gap:"$1",flexDirection:"column",alignItems:"start"},children:[(0,v.jsxs)(w.kC,{css:{flex:1,gap:"$3"},children:[(0,v.jsx)(w.kC,{children:(0,v.jsx)(eK.Z,{image:e.icon,size:40,coerceToDefaultImgTag:!0,css:{borderRadius:"$sm !important",overflow:"hidden"},skeletonCss:{borderRadius:"$sm"}})}),(0,v.jsx)(eU(),{href:e.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:e.eslug?"/event/".concat(e.eslug,"/").concat(e.slug):"/market/".concat(e.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(V.xv,{size:"md",as:"a",weight:"semi",css:{flex:1,cursor:"pointer","&:hover":{textDecorationColor:"black"}},children:e.market})})]}),(0,v.jsx)(eV,{asChild:!0,children:(0,v.jsxs)(eA,{css:{mt:"$1"},children:[i[t]===e.outcome?"Less":"More",(0,v.jsx)(e6.F,{css:{size:"20px",color:"$gray3 !important",transition:"all 0.2s",pb:"$1",...i[t]===e.outcome&&{transform:"rotate(-180deg)"},...""===i[t]&&{transform:"rotate(0deg)"}}})]})})]}),(0,v.jsxs)(eI,{flex:.35,css:{flexDirection:"column",alignItems:"end",gap:"$2"},children:[(0,v.jsx)(eZ,{variant:0===e.outcomeIndex?"green":"red",css:{mb:"$1",fontSize:"$sm !important"},children:e.outcome}),(0,v.jsx)(V.xv,{size:"sm",weight:"semi",children:z()(e.currentMarketValue).format("$0,0.00")}),(0,v.jsx)(V.xv,{size:"sm",weight:"medium",children:(0,v.jsx)(w.Dr,{css:{color:0>Number(z()(e.loss).value())?"$red":"$green2"},children:z()(e.loss).divide(100).format("-0.00%")})})]})]}),(0,v.jsx)(eL,{css:{mt:"$3"},children:(0,v.jsxs)(w.kC,{css:{flex:1,backgroundColor:"$gray6_50",borderRadius:"$sm",p:"$3",gap:"$3"},children:[(0,v.jsxs)(w.kC,{css:{gap:"$5",flex:1,justifyContent:"start"},children:[(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Avg"}),(0,v.jsxs)(V.xv,{size:"sm",weight:"normal",children:[z()(e.priceAvg).multiply(100).format("0"),"\xa2"]})]}),(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Last"}),(0,v.jsxs)(V.xv,{size:"sm",weight:"normal",children:[z()(e.priceCurr).multiply(100).format("0"),"\xa2"]})]}),(0,v.jsxs)(eB,{children:[(0,v.jsx)(V.xv,{size:"sm",weight:"normal",css:{color:"$gray3"},children:"Shares"}),(0,v.jsx)(V.xv,{size:"sm",weight:"normal",children:z()(e.qty).format("0,0")})]})]}),(0,v.jsx)(w.kC,{css:{justifyContent:"flex-end"},children:(0,v.jsx)(eU(),{href:e.eslug?P.Y.EventDetail:P.Y.MarketDetail,as:e.eslug?"/event/".concat(e.eslug,"/").concat(e.slug):"/market/".concat(e.slug),passHref:!0,legacyBehavior:!0,children:(0,v.jsx)(D.z,{type:e.isClosed?"quaternary":"primary",color:e.isClosed?"green":void 0,height:"md",fontSize:"md",fontWeight:"bold",as:"a",css:{gap:"$1",alignItems:"center",height:"36px !important",width:"100px"},children:e.isClosed?"Redeem":"Trade"})})})]})})]})},"".concat(e.slug,"-").concat(e.outcome)))]})};var t3=s(38679),t4=s(40228),t5=s(59813),t6=s(50017),t9=s.n(t6),t8=s(29487),t7=s.n(t8),se=s(58153),st=s.n(se),ss=s(19660),sr=s(14925),si=s(19040);let sn=(e,t)=>{let s=[];for(;e.length>0;)s.push(e.splice(0,t));return s};(d=j||(j={}))[d.StartRedeem=0]="StartRedeem",d[d.RedeemInProgress=1]="RedeemInProgress",d[d.Success=2]="Success",d[d.Failure=3]="Failure";let so=(0,M.zo)("table",{width:"100%",mx:"0",my:"0.1rem",borderCollapse:"collapse",whiteSpace:"normal",tableLayout:"fixed"}),sa=(0,M.zo)("thead",{backgroundColor:"white",borderBottom:"1px solid $gray6",borderTop:"1px solid $gray6"}),sl=(0,M.zo)("tbody",{}),sc=(0,M.zo)("tr",{}),sd=(0,M.zo)("td",{}),sh=(0,M.zo)("th",{}),sx=(e,t)=>(0,t1.nC)(e||[],t).map(t=>{let{question:s}=(0,sr.ky)(e,t.market.id),r=(0,ss.Du)((0,si.ac)(t));return{question:s,value:r}}).sort((e,t)=>parseFloat(t.value)-parseFloat(e.value)),su=e=>{let{redeemableMarkets:t,closeModal:s,positions:r,onRedeemResult:i,optimisiticallyRefresh:n}=e,{authenticated:o,authenticationType:a,proxyAddress:l}=(0,Z.ec)(),{sendTransaction:c}=(0,t5.Z)(),[d,h]=(0,k.useState)(j.StartRedeem),[x,u]=(0,k.useState)([]),[m,p]=(0,k.useState)([]),[g,f]=(0,k.useState)("0"),[y,b]=(0,k.useState)(0),[C,$]=(0,k.useState)(0),z=async()=>{if(h(j.RedeemInProgress),!o)return(0,ev.S3)("Magiclink is null",ei.Ui.MagicLinkMissing,l),{success:!1,errorCode:ei.Ui.MagicLinkMissing,errorMessage:"Could not access MagicLink wallet"};let e=(t||[]).map(e=>{let{marketMakerAddress:t}=e;return t.trim()}).reduce((e,t)=>{let s=t.toLowerCase();return e[s]||(e[s]=!0),e},{}),s=(t||[]).map(e=>(0,t3.redeemPositions)(e0.b6,e0.ZZ,e.conditionId,e.outcomes.length)[0]);$(s.length);let r=sn(s,10),i=[];for(let[d,x]of r.entries())try{b(e=>e+x.length),console.log("Processing txn bundle ".concat(d+1," out of ").concat(r.length,"!"));let u=await c("eoa"===a?t5.i.EOA:t5.i.Magic,x,0,e0.Zc.Matic);i.push(u.wait()),console.log("Bundle ".concat(d+1," was processed successfully"))}catch(m){return(0,ev.S3)(m,"Redeem All Shares",l,ev.ll.MISSION_CRITICAL),{success:!1,errorMessage:m.message||m.error||JSON.stringify(m)}}return await Promise.all(i),n(e),{success:!0}},S=async()=>{let{success:e,errorMessage:t}=await z();e?(console.log("Redeem all successful!"),h(j.Success)):(console.error("Redeem all failed!"),console.error(t),h(j.Failure)),i()};k.useEffect(()=>{if(r.length>0&&t.length>0){let e=sx(t,r);u(e),p(e.slice(0,3));let s=e.reduce((e,t)=>e+parseFloat(t.value),0);f((0,ss._H)(JSON.stringify(s)))}},[r,t]);let M=x.length-m.length;return(0,v.jsx)(tc.Vq,{defaultOpen:!0,onOpenChange(e){e||s()},children:(0,v.jsxs)(tc.cZ,{css:{"@laptops":{maxWidth:"450px"},"@notDesktop":{maxWidth:"calc(100vw - 1rem)"}},children:[(0,v.jsx)(tc.GG,{"aria-label":"Close",asChild:!0,children:(0,v.jsx)(tl.x,{css:{position:"absolute",right:"1.5rem",top:"1.875rem",cursor:"pointer"},size:24,onClick:s})}),(0,v.jsx)(tc.$N,{children:(0,v.jsx)(V.h4,{variant:"primary",css:{lineHeight:"$md"},children:"Redeem All"})}),(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$6",pt:"$3",flexDirection:"column"},children:[d===j.StartRedeem&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(w.xu,{children:[(0,v.jsxs)("span",{children:["This will redeem all eligible market positions for"," "]}),(0,v.jsx)("b",{children:"".concat(g," USDC")})]}),(0,v.jsxs)(w.kC,{css:{textAlign:"left",flexDirection:"column",gap:"$2"},children:[(0,v.jsx)(V.h4,{variant:"primary",css:{fontSize:"$lg !important",lineHeight:"$md !important"},children:"Eligible Markets:"}),(0,v.jsxs)(so,{children:[(0,v.jsx)(sa,{children:(0,v.jsxs)(sc,{children:[(0,v.jsx)(sh,{css:{fontSize:"$md",fontFamily:"$sauce600 !important"},children:"Market"}),(0,v.jsx)(sh,{css:{fontSize:"$md",fontFamily:"$sauce600 !important",textAlign:"right"},children:"Value"})]})}),(0,v.jsx)(sl,{children:m.map(e=>(0,v.jsxs)(sc,{children:[(0,v.jsx)(sd,{children:(0,v.jsx)(V.xv,{size:"md",weight:"medium",children:e.question})}),(0,v.jsx)(sd,{css:{textAlign:"right",verticalAlign:"top"},children:(0,v.jsxs)(V.xv,{size:"md",weight:"medium",children:["$",(0,ss._H)(e.value)]})})]},e.question))})]}),(0,v.jsx)(V.xv,{size:"md",css:{color:"$gray3 !important"},hidden:M<1,children:"And ".concat(M," more market").concat(M>1?"s":"")})]}),(0,v.jsx)(D.z,{height:"md",type:"primary",color:"green",onClick:S,children:"Confirm Redeem All"})]}),d===j.RedeemInProgress&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(w.xu,{css:{textAlign:"center"},children:[(0,v.jsx)(st(),{}),(0,v.jsxs)(V.xv,{size:"md",css:{background:"rgba(0, 0, 0, 0.04)",borderRadius:"$sm",margin:0,padding:"0.5em"},children:["Submitted ",y," out of"," ",C," transactions."]})]})}),d===j.Success&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(w.kC,{css:{flexDirection:"column",alignItems:"center",gap:"$4"},children:[(0,v.jsx)(t7(),{}),(0,v.jsx)(V.h4,{css:{fontSize:"$lg"},children:"Congrats!"}),(0,v.jsx)(V.xv,{size:"md",weight:"normal",children:"You successfully redeemed all your outstanding shares for USDC."}),(0,v.jsx)(D.z,{height:"md",type:"primary",onClick:s,css:{width:"100%"},children:"Got it"})]})}),d===j.Failure&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(w.kC,{css:{flexDirection:"column",alignItems:"center",gap:"$4"},children:[(0,v.jsx)(t9(),{}),(0,v.jsx)(V.h4,{css:{fontSize:"$lg"},children:"Uh Oh!"}),(0,v.jsxs)(V.xv,{size:"md",weight:"normal",children:["Something went wrong! Please try again, or contact us on"," ",(0,v.jsx)("a",{href:"https://discord.gg/hGYPGru",target:"_blank",rel:"noopener noreferrer",children:"Discord"})," ","or ",(0,v.jsx)("a",{id:t4.xH,children:"Intercom"})," ","for assistance."]}),(0,v.jsx)(D.z,{height:"md",type:"primary",color:"gray5",onClick:s,css:{width:"100%"},children:"Got it"})]})})]})]})})},sm=()=>{let{sortPortfolioMarketsBy:e,portfolioSearchQuery:t,redeemableStatus:s,showRedeemAllModal:r,setShowRedeemAllModal:i}=em(),{refetchProxyUsdcBalance:n}=(0,I.Z)(),{markets:o,marketPositions:a,areMarketPositionsLoading:l,hasFetchedMarkets:c,refreshMarketPositions:d}=(0,T.Z)(),h=(0,k.useMemo)(()=>null==o?void 0:o.filter(e=>{switch(s){case g.All:return!0;case g.Active:return!e.closed;case g.Ended:return e.closed;default:return!0}}),[s,o]),x=(0,k.useMemo)(()=>{let e=null==a?void 0:a.map(e=>e.market.id.toLowerCase());return null==o?void 0:o.filter(t=>t.closed&&(null==e?void 0:e.includes(t.marketMakerAddress.toLowerCase())))},[o,a]),u=(0,k.useMemo)(()=>c&&(null==h?void 0:h.length)&&(null==a?void 0:a.length)?Object.values((0,t1.CD)(h,a)).sort((t,s)=>eS(t[0],s[0],e,h)):[],[a,h,e,c]),m=(0,k.useMemo)(()=>c&&(null==h?void 0:h.length)&&(null==a?void 0:a.length)?Object.values((0,t1.G$)(h,a)).sort((t,s)=>eS(t,s,e,h)):[],[a,h,e,c]),p=(0,k.useMemo)(()=>u.filter(e=>!t||e[0].market.toLowerCase().includes(t.toLowerCase())),[t,u]),j=(0,k.useMemo)(()=>!l&&c&&(null==a?void 0:a.length)===0&&!p.length&&!m.length,[l,c,a,p,m]),y=e=>{d(e)},b=async()=>{await n()},C=()=>{i(!1)};return(0,v.jsxs)(w.kC,{css:{flexDirection:"column",rowGap:"0.5rem",pb:"1rem"},children:[r&&(0,v.jsx)(su,{optimisiticallyRefresh:y,positions:null!=a?a:[],redeemableMarkets:null!=x?x:[],closeModal:C,onRedeemResult:b}),(0,v.jsxs)(w.kC,{css:{flexDirection:"column"},children:[(0,v.jsxs)(w.kC,{css:{width:"100%",gap:"$6",position:"sticky",backgroundColor:"white",zIndex:1,borderBottom:"1px solid $gray6",pt:"$4",pb:"$2",top:"110px","@notDesktop":{display:"none"}},children:[(0,v.jsx)(eI,{flex:4,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Market"})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Outcome"})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Avg"})}),(0,v.jsx)(eI,{flex:.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Last"})}),(0,v.jsx)(eI,{children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Shares"})}),(0,v.jsx)(eI,{flex:1.5,children:(0,v.jsx)(V.xv,{weight:"bold",size:"md",children:"Value"})}),(0,v.jsx)(eI,{flex:2,children:" "})]}),l?Array.from({length:20}).map(()=>(0,v.jsx)(eH,{tab:f.Positions},(0,_.uniqueId)("port-pos-skel-"))):j?(0,v.jsx)(w.kC,{css:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",my:"2.5rem"},children:(0,v.jsx)(V.xv,{size:"md",weight:"medium",children:"No positions found."})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.Dr,{css:{"@notDesktop":{display:"none"}},children:p.map(e=>(0,v.jsx)(t2,{groupedPositions:e},"desktop-pos-item-".concat(e[0].slug)))}),(0,v.jsx)(w.Dr,{css:{"@laptops":{display:"none"}},children:m.map(e=>(0,v.jsx)(t2,{groupedPositions:[e]},"mobile-pos-item-".concat(e.slug,"-").concat(e.outcome)))})]})]})]})},sp=()=>{let[e,t]=(0,k.useState)(!1),{selectedTab:s,setSelectedTab:r}=em();return((0,Q.Z)(()=>t(!0)),e)?(0,v.jsxs)(Y,{variant:"underline",value:s,onValueChange(e){r(e)},children:[(0,v.jsx)(G,{variant:"underline",overflow:!0,"aria-label":"Manage your portfolio",css:{order:1,position:"sticky",backgroundColor:"white",zIndex:3,"@laptops":{top:"-1px",pt:"$4"},"@notDesktop":{top:"99px",pt:"$4",width:"100vw",transform:"translateX(-0.5rem)",px:"0.5rem"}},children:Object.values(f).map(e=>(0,v.jsx)(U,{variant:"underline",value:e,children:(0,_.capitalize)(e)},e))}),(0,v.jsx)(t0,{css:{order:2}}),(0,v.jsx)(X,{variant:"underline",value:f.Positions,css:{order:3,pb:"$4"},children:(0,v.jsx)(sm,{})}),(0,v.jsx)(X,{variant:"underline",value:f.Orders,css:{order:3,pb:"$4"},children:(0,v.jsx)(ty,{})}),(0,v.jsx)(X,{variant:"underline",value:f.Liquidity,css:{order:3,pb:"$4"},children:(0,v.jsx)(e7,{})}),(0,v.jsx)(X,{variant:"underline",value:f.History,css:{order:3,pb:"$4"},children:(0,v.jsx)(e4,{})})]}):null};var sg=s(57300),sf=s(61256);let sj=()=>{let e=(0,y.useRouter)(),{setShowSignUpModal:t,showConnectModal:s,showSignUpModal:r}=(0,B.vR)(),{initiated:i,authenticated:n}=(0,Z.ec)(),[o,a]=(0,k.useState)(!1);return(0,k.useEffect)(()=>{i&&!o&&(n||s||t(!0),a(!0))},[n,i,t,s,o]),(0,k.useEffect)(()=>{!r&&o&&e.push("/")},[r]),(0,v.jsx)(eu,{children:(0,v.jsx)(b.Z,{children:(0,v.jsx)(sg.H,{children:(0,v.jsx)(sf.Z,{mobileTopPadding:"80px",mobileBottomPadding:"24px",legacySidePadding:!0,title:"Polymarket - Portfolio",description:"View your Polymarket portfolio and track your trades and winnings.",children:(0,v.jsxs)(w.kC,{css:{flexDirection:"column",width:"100%",maxWidth:"1018px",height:"100%",alignSelf:"center","@notDesktop":{height:"auto"}},children:[(0,v.jsx)(W,{}),(0,v.jsx)(sp,{})]})})})})})};var sv=!0,sy=sj},17919:function(e,t,s){"use strict";var r=s(32912);let i=e=>{let t=new Date;return t.setMonth(e),(0,r.Z)(new Date(t),"MMMM")};t.Z=i},4911:function(e,t,s){"use strict";var r=s(584),i=s(32912),n=s(77349);let o=(0,r.Z)(new Date),a=Array.from(Array(7)).map((e,t)=>(0,i.Z)((0,n.Z)(o,t),"EEEEEE"));t.Z=a},50017:function(e,t,s){var r=s(67294);function i(e){return r.createElement("svg",e,[r.createElement("circle",{opacity:"0.2",cx:"38.5",cy:"38.5",r:"38.5",fill:"#E23838",key:0}),r.createElement("circle",{cx:"38.5",cy:"38.5",r:"32.5",fill:"#E23838",key:1}),r.createElement("path",{d:"M38.5 48.3857V52.9999",stroke:"white",strokeWidth:"4",key:2}),r.createElement("path",{d:"M38.5 23.3857V41.9999",stroke:"white",strokeWidth:"4",key:3})])}i.defaultProps={width:"77",height:"77",viewBox:"0 0 77 77",fill:"none"},e.exports=i,i.default=i}},function(e){e.O(0,[158,321,113,927,25,256,799,300,120,774,888,179],function(){return e(e.s=14904)}),_N_E=e.O()}]);